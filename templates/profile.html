{{ define "content" }}
<h2>{{ .PageTitle }}</h2>

{{/* Section to list existing profiles */}}
<section class="admin-section">
    <h3>Existing Profiles</h3>
    {{ if .Profiles }}
    <ul class="admin-profile-list">
        {{ range .Profiles }}
        <li>
            <a href="/profile/{{ .Slug }}">{{ .Title }}</a>
            <span class="slug-display">({{ .Slug }}.md)</span>
            {{/* Add links for Edit/Delete here in future versions */}}
        </li>
        {{ end }}
    </ul>
    {{ else }}
    <p>No profiles found in the 'content' directory.</p>
    {{ end }}
</section>

<hr>

{{/* Section for uploading new profiles */}}
<section class="admin-section">
    <h3>Upload New Profile</h3>
    {{/* The form submits data via POST to the /admin/upload endpoint */}}
    {{/* enctype="multipart/form-data" is required for file uploads */}}
    <form action="/admin/upload" method="post" enctype="multipart/form-data" class="upload-form">
        <div class="form-group">
            <label for="profileFile">Select Markdown File (.md):</label>
            {{/* Input field for selecting the file */}}
            {{/* 'accept=".md"' suggests to the browser to filter for Markdown files */}}
            <input type="file" id="profileFile" name="profileFile" accept=".md,text/markdown" required>
        </div>
        <div class="form-group">
            {{/* Submit button for the form */}}
            <button type="submit" class="button">Upload Profile</button>
        </div>
        <p class="form-hint">
            <small>
                Note: The profile title will be automatically extracted from YAML front matter
                (e.g., `title: My Awesome Title`) within the uploaded file if present.
                If no title is found in the front matter, the filename (converted to a URL-friendly slug)
                will be used as the title. The uploaded filename will also be sanitized to create a safe slug
                for the URL and stored filename (e.g., "My Profile!.md" might become "my-profile.md").
            </small>
        </p>
    </form>
</section>
{{ end }}